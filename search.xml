<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>我的第一篇测试博客</title>
      <link href="/myblog/2022/07/17/001/"/>
      <url>/myblog/2022/07/17/001/</url>
      
        <content type="html"><![CDATA[<h3 id="1-开发工具"><a href="#1-开发工具" class="headerlink" title="1.开发工具"></a>1.开发工具</h3><p><strong>硬件开发工具：</strong></p><p>Altium Designer 17.1</p><p><strong>编程开发工具：</strong></p><p>KEIL 4</p><p><strong>程序下载工具：</strong></p><p>STC-ISP</p><p><strong>串口驱动：</strong></p><p>CH341SER</p><h3 id="2-单片机最小系统介绍"><a href="#2-单片机最小系统介绍" class="headerlink" title="2.单片机最小系统介绍"></a>2.单片机最小系统介绍</h3><p>单片机（Microcontrollers）是一种集成电路芯片，是采用超大规模集成电路技术把具有数据处理能力的中央处理器CPU、随机存储器RAM、只读存储器ROM、多种I&#x2F;O口和中断系统、定时器&#x2F;计数器等功能（可能还包括显示驱动电路、脉宽调制电路、模拟多路转换器、A&#x2F;D转换器等电路）集成到一块硅片上构成的一个小而完善的微型计算机系统，在工业控制领域广泛应用。从上世纪80年代，由当时的4位、8位单片机，发展到现在的300M的高速单片机。本文的单片机特指51单片机，具体芯片型号是STC89C52RC。需注意STC89C51,STC89C52，AT89C51,AT89C52都是51单片机的一种具体芯片型号。</p><h4 id="2-1原理图及PCB"><a href="#2-1原理图及PCB" class="headerlink" title="2.1原理图及PCB"></a>2.1原理图及PCB</h4><p>原理图<br><img src="https://img-blog.csdnimg.cn/46dbe8b4d4fb4575837b2e44f8dfdec7.png" alt="51最小系统板"><br>PCB<br>PCB的2D视角<br><img src="https://img-blog.csdnimg.cn/d68fe4e47c4d4b96a2f14054ef0fff53.png" alt="在这里插入图片描述"></p><p>PCB的3D视角<br><img src="https://img-blog.csdnimg.cn/e127d33960f64f9fb54237bdb3b59806.png" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/6f91adb5b7b34e95ac1743e3f42e1756.png" alt="在这里插入图片描述"><br>最小系统组成：</p><p>51单片机最小系统：单片机、复位电路、晶振（时钟）电路、电源</p><p>最小系统用到的引脚</p><p>1、主电源引脚（2根）<br>VCC：电源输入，接＋5V电源<br>GND：接地线</p><p>2、外接晶振引脚（2根）<br>XTAL1：片内振荡电路的输入端<br>XTAL2：片内振荡电路的输出端</p><p>3、控制引脚（4根）<br>RST&#x2F;VPP：复位引脚，引脚上</p><h4 id="2-2电源"><a href="#2-2电源" class="headerlink" title="2.2电源"></a>2.2电源</h4><p>设计使用的电源接口是DC 5V。USB座可以查到手机充电口，电脑USB端取电。接好线路后，按下电源开关，单片机即可开始工作。<br><img src="https://img-blog.csdnimg.cn/06989857d4bf449abc161e1a315f0e00.png" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/5c7918a61ef84c1080d57c0b213e5244.png" alt="在这里插入图片描述"></p><h4 id="2-3复位电路"><a href="#2-3复位电路" class="headerlink" title="2.3复位电路"></a>2.3复位电路</h4><p><img src="https://img-blog.csdnimg.cn/b66e89e12c7c42a4b4396f1fd6dd277a.png" alt="在这里插入图片描述"><br>在电路图中，电容的的大小是10uf，电阻的大小是10k。<br>在5V正常工作的51单片机中小于1.5V的电压信号为低电平信号，而大于1.5V的电压信号为高电平信号。可以算出电容充电到电源电压的0.7倍，即电容两端电压为3.5V、电阻两端电压为1.5V时，需要的时间约为T&#x3D;RC&#x3D;10K*10UF&#x3D;0.1S。<br>也就是说在单片机上电启动的0.1S内，电容两端的电压从0-3.5V不断增加，这个时候10K电阻两端的电压为从5-1.5V不断减少（串联电路各处电压之和为总电压），所以RST引脚所接收到的电压是5V-1.5V的过程，也就是高电平到低电平的过程。<br>单片机RST引脚是高电平有效，即复位；低电平无效，即单片机正常工作。所以在开机0.1S内，单片机系统RST引脚接收到了时间为0.1S左右的高电平信号，所以实现了自动复位。<br>在单片机启动0.1S后，电容C两端的电压持续充电为5V，这是时候10K电阻两端的电压接近于0V，RST处于低电平所以系统正常工作。当按键按下的时候，开关导通，这个时候电容两端形成了一个回路，电容被短路，所以在按键按下的这个过程中，电容开始释放之前充的电量。随着时间的推移，电容的电压在0.1S内，从5V释放到变为了1.5V，甚至更小。根据串联电路电压为各处之和，这个时候10K电阻两端的电压为3.5V，甚至更大，所以RST引脚又接收到高电平。单片机系统自动复位。</p><h4 id="2-4晶振电路"><a href="#2-4晶振电路" class="headerlink" title="2.4晶振电路"></a>2.4晶振电路</h4><p><img src="https://img-blog.csdnimg.cn/8e01c15ecc76463d8f7bc278ec54df6f.png" alt="在这里插入图片描述"><br>晶振基本概念 晶振全名叫晶体振荡器，每个单片机系统里都有晶振，晶振是由石英晶体经过加工并镀上电极而做成的，主要的特性就是通电后会产生机械震荡，可以给单片机提供稳定的时钟源，晶振提供时钟频率越高，单片机的运行速度也就越快。 晶振用一种能把电能和机械能相互转化的晶体在共振的状态下工作，以提供稳定，精确的单频振荡。<br>晶振起振后， 产生的振动信号会通过XTAL1引脚， 依次经过振荡器和时钟发生器的处理，得到机器周期信号，作为指令操作的依据。51单片机常用的晶振是12M和11.0592M</p><h3 id="3元器件清单及样机焊接"><a href="#3元器件清单及样机焊接" class="headerlink" title="3元器件清单及样机焊接"></a>3元器件清单及样机焊接</h3><h4 id="3-1元器件清单"><a href="#3-1元器件清单" class="headerlink" title="3.1元器件清单"></a>3.1元器件清单</h4><p><img src="https://img-blog.csdnimg.cn/a2c279649c364605bec9805c802660e9.png" alt="在这里插入图片描述"><br>如果不想直接焊芯片到板子，可以买个下图黑色的紧锁座。规格选DIP40<br><img src="https://img-blog.csdnimg.cn/761265849ab54244add7f3740659420a.png" alt="在这里插入图片描述"></p><h4 id="3-2PCB板制作"><a href="#3-2PCB板制作" class="headerlink" title="3.2PCB板制作"></a>3.2PCB板制作</h4><p>方法1：学校实验室常用的DIY腐蚀电路板制作（略）<br>方法2：外发给专业的PCB工厂。推荐嘉立创<a href="https://www.jlc.com/#">https://www.jlc.com/#</a><br>可代发，需要请私信<br>空板正反面：<br><img src="https://img-blog.csdnimg.cn/1ee44630c528404eaf761982ca9bd128.png" alt="在这里插入图片描述"><br>3.3焊接注意事项<br>直插电解电容，和LED灯是有正负极之分的。</p><p>电解电容正负极分辨：<br>1.看实物套管<br><img src="https://img-blog.csdnimg.cn/c86815b439fa46dba5dc0d5a251d8d52.png" alt="在这里插入图片描述"></p><p>2.看引脚长短：<br>电解电容正极引线比较长、负极稍短</p><p>LED灯正负极分辨：<br>1.引脚长短也可以看出来，发光二极管的正负极，引脚长的为正极，短的为负极。<br>2.万用表打到二极管档，分别短接LED灯引脚，如果亮，红表笔接的是正极。</p><h4 id="3-4最终实物："><a href="#3-4最终实物：" class="headerlink" title="3.4最终实物："></a>3.4最终实物：</h4><p><img src="https://img-blog.csdnimg.cn/409e85bbdab843e8b2e5cf66c1707f0a.png" alt="在这里插入图片描述"></p><p>焊接好的实物如图</p><h3 id="4程序烧录及测试"><a href="#4程序烧录及测试" class="headerlink" title="4程序烧录及测试"></a>4程序烧录及测试</h3><p>测试用的51单片机型号是STC89C52RC，是国产品牌宏晶科技STC量产的8051单片机。</p><h4 id="4-1测试代码"><a href="#4-1测试代码" class="headerlink" title="4.1测试代码"></a>4.1测试代码</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;reg52.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;intrins.h&gt;</span></span></span><br><span class="line"><span class="comment">//数据类型定义</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">char</span> uchar;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">int</span>  uint;</span><br><span class="line">uchar flag1s = <span class="number">0</span>;</span><br><span class="line">uint one_sec_flag = <span class="number">0</span>;</span><br><span class="line">sbit TEST_LED=P1^<span class="number">0</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">EA=<span class="number">1</span>;<span class="comment">//开总中断</span></span><br><span class="line">TMOD=<span class="number">0X01</span>;<span class="comment">//T0的工作模式为模式1</span></span><br><span class="line">TH0=<span class="number">0X4C</span>;</span><br><span class="line">TL0=<span class="number">0X00</span>;<span class="comment">//11.0592M晶振 50ms定时初值</span></span><br><span class="line">ET0=<span class="number">1</span>; <span class="comment">//允许定时器1中断</span></span><br><span class="line">TR0=<span class="number">1</span>;<span class="comment">//启动定时器0  </span></span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(flag1s)<span class="comment">//一秒刷新一次</span></span><br><span class="line">&#123;</span><br><span class="line">TEST_LED = <span class="number">0</span>;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">TEST_LED = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">Timer0</span><span class="params">()</span> interrupt 1</span><br><span class="line">&#123;</span><br><span class="line">TH0=<span class="number">0XBB</span>;</span><br><span class="line">TL0=<span class="number">0X00</span>;</span><br><span class="line"><span class="keyword">if</span>(++one_sec_flag&lt;<span class="number">50</span>)&#123;</span><br><span class="line"><span class="keyword">return</span>;<span class="comment">//提前结束函数</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(flag1s) </span><br><span class="line">&#123;</span><br><span class="line">flag1s = <span class="number">0</span>;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">flag1s = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">one_sec_flag=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译之后产生test.hex烧录文件。</p><p>4.2下载器及下载驱动<br> STC89C52单片机下载器实际上就是USB转TTL串口，如下图所示<br><img src="https://img-blog.csdnimg.cn/d40b42810c4c4ad781e1dd5e52f88d43.png" alt="在这里插入图片描述"><br>驱动：压缩包中的CH341SER.EXE<br>先安装驱动才能下载代码到单片机中。</p><h4 id="4-3程序下载"><a href="#4-3程序下载" class="headerlink" title="4.3程序下载"></a>4.3程序下载</h4><p>硬件准备：<br><img src="https://img-blog.csdnimg.cn/7c9812c418794bae9907f29cf11f7b5d.png" alt="在这里插入图片描述"><br>下载器的RXD连接芯片的TXD(P30),下载器的TXD连接芯片的RXD(P31),本设计引出了芯片的RXD和TXD，如上图所示连接即可。</p><p>软件准备：<br>STC-ISP.exe<br>双击打开<br>下载步骤</p><p>1选择选择单片机型号<br>2.选择下载器的串口<br>3.打开编译生成的HEX文件<br>4.点击下载<br><img src="https://img-blog.csdnimg.cn/7e36183cdf66492c8459da0013baa206.png" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/82d3cf17a0e1422bb2f6719d42414ea6.png" alt="在这里插入图片描述"><br>此时，按下电源开关给单片机上电，下载软件会识别出单片机，然后自动下载程序。下载成功后会有提醒。</p><p><img src="https://img-blog.csdnimg.cn/7707f4a854204cf28a051d6d4b402d12.png" alt="在这里插入图片描述"><br>测试效果：测试LED灯一秒间隔闪烁。</p><p>测试视频：</p><p>[video(video-ePlPvdUO-1647762864168)(type-csdn)(url-<a href="https://live.csdn.net/v/embed/190571)(image-https://video-community.csdnimg.cn/vod-84deb4/54d6aeca76434d24b537dacc0fca4686/snapshots/e3d990af14e3460181644f94c12e9fc8-00001.jpg?auth_key=1647683698-974b190b7abf4914bc63aaff73f7d643-0-2acbb440be37f5732c1abcbf3ce167a2)(title-%E8%87%AA%E5%88%B651%E5%8D%95%E7%89%87%E6%9C%BA%E8%BF%90%E8%A1%8C%E6%B5%8B%E8%AF%95%E8%A7%86%E9%A2%91)%5D">https://live.csdn.net/v/embed/190571)(image-https://video-community.csdnimg.cn/vod-84deb4/54d6aeca76434d24b537dacc0fca4686/snapshots/e3d990af14e3460181644f94c12e9fc8-00001.jpg?auth_key=1647683698-974b190b7abf4914bc63aaff73f7d643-0-2acbb440be37f5732c1abcbf3ce167a2)(title-自制51单片机运行测试视频)]</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/myblog/2022/07/16/hello-world/"/>
      <url>/myblog/2022/07/16/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
